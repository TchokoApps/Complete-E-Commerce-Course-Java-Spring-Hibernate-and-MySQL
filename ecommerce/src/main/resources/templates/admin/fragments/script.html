<html
        xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div th:fragment="script">
    <html xmlns:th="http://www.thymeleaf.org">
    <script th:src="@{/backend/assets/libs/jquery/jquery.min.js}"></script>
    <script th:src="@{/backend/assets/libs/bootstrap/js/bootstrap.bundle.min.js}"></script>
    <script th:src="@{/backend/assets/libs/metismenu/metisMenu.min.js}"></script>
    <script th:src="@{/backend/assets/libs/simplebar/simplebar.min.js}"></script>
    <script th:src="@{/backend/assets/libs/node-waves/waves.min.js}"></script>


    <!-- apexcharts -->
    <script th:src="@{/backend/assets/libs/apexcharts/apexcharts.min.js}"></script>

    <!-- jquery.vectormap map -->
    <script th:src="@{/backend/assets/libs/admin-resources/jquery.vectormap/jquery-jvectormap-1.2.2.min.js}"></script>
    <script th:src="@{/backend/assets/libs/admin-resources/jquery.vectormap/maps/jquery-jvectormap-us-merc-en.js}"></script>

    <!-- Required datatable js -->
    <script th:src="@{/backend/assets/libs/datatables.net/js/jquery.dataTables.min.js}"></script>
    <script th:src="@{/backend/assets/libs/datatables.net-bs4/js/dataTables.bootstrap4.min.js}"></script>

    <!-- Responsive examples -->
    <script th:src="@{/backend/assets/libs/datatables.net-responsive/js/dataTables.responsive.min.js}"></script>
    <script th:src="@{/backend/assets/libs/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js}"></script>

    <script th:src="@{/backend/assets/js/pages/dashboard.init.js}"></script>

    <!-- App js -->
    <script th:src="@{https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js}"
            type="text/javascript"></script>

    <!-- Required datatable js -->
    <!-- Buttons examples -->
    <script th:src="@{/backend/assets/libs/datatables.net-buttons/js/dataTables.buttons.min.js}"></script>
    <script th:src="@{/backend/assets/libs/datatables.net-buttons-bs4/js/buttons.bootstrap4.min.js}"></script>
    <script th:src="@{/backend/assets/libs/jszip/jszip.min.js}"></script>
    <script th:src="@{/backend/assets/libs/pdfmake/build/pdfmake.min.js}"></script>
    <script th:src="@{/backend/assets/libs/pdfmake/build/vfs_fonts.js}"></script>
    <script th:src="@{/backend/assets/libs/datatables.net-buttons/js/buttons.html5.min.js}"></script>
    <script th:src="@{/backend/assets/libs/datatables.net-buttons/js/buttons.print.min.js}"></script>
    <script th:src="@{/backend/assets/libs/datatables.net-buttons/js/buttons.colVis.min.js}"></script>

    <script th:src="@{/backend/assets/libs/datatables.net-keytable/js/dataTables.keyTable.min.js}"></script>
    <script th:src="@{/backend/assets/libs/datatables.net-select/js/dataTables.select.min.js}"></script>

    <!-- Responsive examples -->
    <script th:src="@{/backend/assets/libs/datatables.net-responsive/js/dataTables.responsive.min.js}"></script>
    <script th:src="@{/backend/assets/libs/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js}"></script>

    <!-- Datatable init js -->
    <script th:src="@{/backend/assets/js/pages/datatables.init.js}"></script>

    <!-- Sweet Alerts js -->
    <script th:src="@{/backend/assets/libs/sweetalert2/sweetalert2.min.js}"></script>

    <script th:src="@{/backend/assets/libs/select2/js/select2.min.js}"></script>
    <script th:src="@{/backend/assets/libs/bootstrap-datepicker/js/bootstrap-datepicker.min.js}"></script>
    <script th:src="@{/backend/assets/libs/spectrum-colorpicker2/spectrum.min.js}"></script>
    <script th:src="@{/backend/assets/libs/bootstrap-touchspin/jquery.bootstrap-touchspin.min.js}"></script>
    <script th:src="@{/backend/assets/libs/admin-resources/bootstrap-filestyle/bootstrap-filestyle.min.js}"></script>
    <script th:src="@{/backend/assets/libs/bootstrap-maxlength/bootstrap-maxlength.min.js}"></script>

    <script th:src="@{/backend/assets/js/pages/form-advanced.init.js}"></script>

    <!-- twitter-bootstrap-wizard js -->
    <script th:src="@{/backend/assets/libs/twitter-bootstrap-wizard/jquery.bootstrap.wizard.min.js}"></script>

    <script th:src="@{/backend/assets/libs/twitter-bootstrap-wizard/prettify.js}"></script>

    <!-- form wizard init -->
    <script th:src="@{/backend/assets/js/pages/form-wizard.init.js}"></script>

    <!--tinymce js-->
    <script th:src="@{/backend/assets/libs/tinymce/tinymce.min.js}"></script>

    <!-- init js -->
    <script th:src="@{/backend/assets/js/pages/form-editor.init.js}"></script>

    <script th:src="@{/backend/assets/js/app.js}"></script>

    <script>
        $(function () {
            $(document).on('click', '#delete', function (e) {
                e.preventDefault();
                var link = $(this).attr("href");
                Swal.fire({
                    title: 'Are you sure?',
                    text: "Delete This Data?",
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'Yes, delete it!'
                }).then((result) => {
                    if (result.isConfirmed) {
                        window.location.href = link
                        Swal.fire(
                            'Deleted!',
                            'Your file has been deleted.',
                            'success'
                        )
                    }
                })
            });
        });
    </script>

    <script type="text/javascript">
        $(document).ready(function () {
            $("#buttonCancelCreateUser").on("click", function () {
                window.location = "[[@{/admin/users}]]";
            });
        });
    </script>

    <script type="text/javascript">
        $(document).ready(function () {
            $("#buttonCancelCreateBrand").on("click", function () {
                window.location = "[[@{/admin/brands}]]";
            });
        });
    </script>

    <script type="text/javascript">
        $(document).ready(function () {
            $("#buttonCancelCreateCategory").on("click", function () {
                window.location = "[[@{/admin/categories}]]";
            });
        });
    </script>

    <script type="text/javascript">
        $(document).ready(function () {
            $("#buttonCancelCreateProduct").on("click", function () {
                window.location = "[[@{/admin/products}]]";
            });
        });
    </script>

    <script type="text/javascript">
        $(document).ready(function () {
            $("#buttonCancelUpdateProduct").on("click", function () {
                window.location = "[[@{/admin/products}]]";
            });
        });
    </script>

    <script th:if="${message != null && alertType != null} " th:inline="javascript">
        /*<![CDATA[*/
        /* Get session message and alertType if they exist */
        var message = /*[[${message}]]*/ '';
        var alertType = /*[[${alertType}]]*/ 'success';

        toastr.options = {
            "closeButton": true,
            "progressBar": true,
            "positionClass": "toast-top-right",
            "showDuration": "300",
            "hideDuration": "1000",
            "timeOut": "5000",
            "extendedTimeOut": "1000",
            "showEasing": "swing",
            "hideEasing": "linear",
            "showMethod": "fadeIn",
            "hideMethod": "fadeOut"
        }

        /* Show Toastr notification if message exists */
        if (message !== '') {
            switch (alertType) {
                case 'success':
                    toastr.success(message);
                    break;
                case 'warning':
                    toastr.warning(message);
                    break;
                case 'error':
                    toastr.error(message);
                    break;
                default:
                    toastr.info(message);
                    break;
            }
        }
        /*]]>*/
    </script>

    <script>
        $(document).ready(function () {
            // Set up event listener for file input
            $('#image').on('change', function () {
                var file = this.files[0];
                // Check file size
                if (file && file.size > 500000) {
                    Swal.fire({
                        icon: 'error',
                        title: 'Oops...',
                        text: 'File size should not exceed 500 KB.'
                    });
                    return;
                }
                // Read selected file and set preview image
                var reader = new FileReader();
                reader.onload = function (e) {
                    $('#showImage').attr('src', e.target.result);
                    $('#deleteImage').show();
                }
                reader.readAsDataURL(file);
            });

            // Set up event listener for remove button
            $('#deleteImage').on('click', function () {
                // Reset file input and preview image to default
                $('#image').val('');
                $('#showImage').attr('src', '/upload/no_image.jpg');
                $(this).hide();
            });
        });
    </script>

    <script>
        $(function () {

            if ($('.selected-images').children().length === 0) {
                showDefaultImage();
                // Empty the #moreImages input field
                $('#moreImages').val('');
            }

            // Handle file input change event
            $('#moreImages').on('change', handleFileInputChange);

            function handleFileInputChange() {
                // Get the selected files
                const files = $(this)[0].files;
                // Clear the selected-images div
                $('.selected-images').empty();
                // Iterate through the selected files and create image elements
                for (const file of files) {
                    createImageElement(file);
                }

                // Log the moreImages field
                console.dir($('#moreImages')[0].files);
            }

            function createImageElement(file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    // Check if the file size is greater than 1 MB
                    if (file.size > 500000) {
                        $('#moreImages').val('');
                        toastr.options = {
                            "closeButton": true,
                            "progressBar": true,
                            "positionClass": "toast-top-right",
                            "showDuration": "300",
                            "hideDuration": "1000",
                            "timeOut": "5000",
                            "extendedTimeOut": "1000",
                            "showEasing": "swing",
                            "hideEasing": "linear",
                            "showMethod": "fadeIn",
                            "hideMethod": "fadeOut"
                        }

                        toastr.error('File size should not exceed 500 KB.');
                        return;
                    }
                    // Create image element
                    const img = $('<img>', {
                        class: 'rounded avatar-lg',
                        height: '100',
                        src: e.target.result,
                        width: '100'
                    });
                    // Append the image element and delete button element to the selected-images div
                    $('.selected-images').append($('<div>').append(img));
                };
                reader.readAsDataURL(file);
            }

            function showDefaultImage() {
                $('.selected-images').html('<img class="rounded avatar-lg" id="showImage" src="/upload/no_image.jpg">');
            }
        });
    </script>

    <script>

        function showDefaultImage() {
            $('.selected-images').html('<img class="rounded avatar-lg" id="showImage" src="/upload/no_image.jpg">');
        }
    </script>

    <script>
        $(document).ready(function () {
            $('#addProductDetailRow').on('click', function () {
                let newRow = '<tr><td><input type="text" class="form-control" ' +
                    'name="productDetailNames" id="productDetailNames" required minlength="3" maxlength="150">' +
                    '</td><td><input type="text" class="form-control" name="productDetailValues" id="productDetailValues" ' +
                    'required required minlength="3" maxlength="150"></td><td><button type="button" ' +
                    'class="btn btn-danger delete-row">Delete</button></td></tr>';
                $('table#custom-fields-table tbody').append(newRow);
            });

            $('table#custom-fields-table').on('click', '.delete-row', function () {
                $(this).closest('tr').remove();
            });
        });
    </script>
</div>
</body>
</html>

